# flow-cli - Pure ZSH Workflow Plugin
# ADHD-optimized workflow management for developers

## Project: flow-cli
## Type: zsh-plugin
## Status: active
## Phase: v3.3.0 - Plugin System
## Priority: 1
## Progress: 95

## Focus: v3.3.0 COMPLETE - Config and Plugin systems done

## Quick Context
Pure ZSH workflow plugin with optional atlas integration for state management.
Clean separation from atlas (Node.js state engine) complete.
Legacy 140KB monolithic code archived - lean plugin architecture.

## Architecture (v3.2.0)
```
flow-cli/
â”œâ”€â”€ flow.plugin.zsh        # Plugin entry point (v3.2.0)
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ core.zsh           # Core utilities, colors
â”‚   â”œâ”€â”€ atlas-bridge.zsh   # Atlas CLI integration (graceful fallback)
â”‚   â”œâ”€â”€ project-detector.zsh
â”‚   â”œâ”€â”€ tui.zsh            # TUI components
â”‚   â””â”€â”€ dispatchers/       # g, mcp, obs, qu, r dispatchers
â”œâ”€â”€ commands/
â”‚   â”œâ”€â”€ work.zsh           # work, finish, hop, why
â”‚   â”œâ”€â”€ dash.zsh           # dash, dash-tui
â”‚   â”œâ”€â”€ capture.zsh        # catch, inbox, crumb, win, yay
â”‚   â”œâ”€â”€ adhd.zsh           # js, next (--ai), stuck (--ai), focus, brk
â”‚   â”œâ”€â”€ status.zsh         # status, st, setprogress
â”‚   â”œâ”€â”€ timer.zsh          # timer, pom
â”‚   â”œâ”€â”€ morning.zsh        # morning, today, week, am
â”‚   â”œâ”€â”€ flow.zsh           # flow dispatcher (help, version, etc.)
â”‚   â”œâ”€â”€ ai.zsh             # flow ai, flow do (NEW v3.2.0)
â”‚   â”œâ”€â”€ install.zsh        # flow install (NEW v3.2.0)
â”‚   â””â”€â”€ upgrade.zsh        # flow upgrade (NEW v3.2.0)
â”œâ”€â”€ completions/           # ZSH completions
â”œâ”€â”€ hooks/                 # chpwd, precmd
â”œâ”€â”€ setup/                 # Setup files
â”‚   â””â”€â”€ Brewfile           # Recommended CLI tools
â””â”€â”€ zsh/functions/         # Symlinks to external integrations only
    â”œâ”€â”€ core-utils.zsh â†’ zsh-claude-workflow/
    â”œâ”€â”€ obs.zsh â†’ obsidian-cli-ops/
    â””â”€â”€ project-detector.zsh â†’ zsh-claude-workflow/
```

## v3.3.0 Changes (2025-12-26) âœ… COMPLETE
### Plugin System
- [x] `lib/plugin-loader.zsh` - Core plugin system (400+ lines)
  - [x] Plugin discovery (single file, directory, git)
  - [x] Plugin registration and loading
  - [x] Enable/disable with registry persistence
  - [x] Dependency checking (tools, flow version)
- [x] Hook system with 8 events
  - [x] post-work, pre-finish, post-finish
  - [x] session-start, session-end
  - [x] project-change, pre-command, post-command
- [x] `flow plugin` command
  - [x] list, enable, disable, create, install, remove
  - [x] info, hooks, path
  - [x] GitHub installation support (gh:user/repo)
  - [x] Dev mode installation (symlink)
- [x] Example plugin demonstrating capabilities
- [x] Tab completions for plugin commands
- [x] Version bump to 3.3.0

## v3.2.0 Changes (2025-12-26) âœ… COMPLETE
### AI-Powered Commands
- [x] `flow ai <query>` - Ask AI anything with project context
- [x] `flow ai --explain <code>` - Explain code or concepts
- [x] `flow ai --fix <problem>` - Get fix suggestions
- [x] `flow ai --suggest <goal>` - Get improvement suggestions
- [x] `flow ai --create <spec>` - Generate code from description
- [x] `flow do "<natural language>"` - Natural language â†’ shell command
- [x] `stuck --ai` - AI-powered help when blocked
- [x] `next --ai` - AI-powered task suggestions

### Install & Upgrade System
- [x] `flow install` - Interactive tool installer
- [x] `flow install --profile <name>` - Profile-based install (minimal/developer/researcher/writer/full)
- [x] `flow install --category <name>` - Category-based install (core/productivity/git/dev/research)
- [x] `flow upgrade self` - Self-update flow-cli via git
- [x] `flow upgrade tools` - Update Homebrew packages
- [x] `flow upgrade plugins` - Update ZSH plugins
- [x] `flow upgrade all` - Update everything
- [x] `flow upgrade --check` - Check for updates without applying

### Infrastructure
- [x] Tab completions for all new commands
- [x] Help system integration
- [x] Context-aware AI prompts
- [x] Safety checks for dangerous commands in `flow do`
- [x] Version bump to 3.2.0

## v3.1.0 Changes (2025-12-26) âœ… COMPLETE
- [x] `flow doctor` command with --fix and --ai modes
- [x] setup/Brewfile with 14 recommended CLI tools
- [x] Dashboard Phase 1 enhancements complete

## v3.0.0 Changes (2025-12-25) âœ… COMPLETE
- [x] Archive 140KB legacy zsh/functions/ to .archive/
- [x] Keep only symlinks to external integrations
- [x] Remove FLOW_LEGACY_COMPAT flag (no longer needed)
- [x] Update plugin loading to handle symlinks properly
- [x] Bump version to 3.0.0

## Completed
- [x] Create ZSH plugin structure
- [x] Migrate core commands to commands/
- [x] Create lib/core.zsh, atlas-bridge.zsh
- [x] Create all core commands (work, dash, capture, adhd, status, timer, morning)
- [x] Move dispatchers to lib/dispatchers/
- [x] Archive Node.js CLI to atlas project
- [x] Archive legacy 140KB functions to .archive/
- [x] Clean plugin entry point
- [x] Update version to 3.0.0

## Features
### Core Commands
- `work <project>` - Start working on a project
- `finish [note]` - End session with optional commit
- `hop <project>` - Quick project switch (tmux)
- `why` - Show current context

### Dashboard
- `dash` - Project dashboard
- `dash-tui` - Interactive fzf dashboard

### Capture (Dopamine)
- `catch <text>` - Quick idea capture
- `crumb <text>` - Leave breadcrumb
- `win <text>` - Log accomplishment
- `yay` - Show recent wins

### ADHD Helpers
- `js` - Just start (anti-paralysis)
- `next` - What to work on (`--ai` for AI suggestion)
- `stuck` - When blocked (`--ai` for AI help)
- `focus [text]` - Get/set focus
- `brk [min]` - Take a break

### AI-Powered (v3.2.0)
- `flow ai <query>` - Ask AI with context
- `flow ai --explain` - Explain code/concepts
- `flow ai --fix` - Get fix suggestions
- `flow ai --suggest` - Get improvements
- `flow ai --create` - Generate code
- `flow do "..."` - Natural language commands

### Setup & Management (v3.2.0)
- `flow install` - Interactive tool installer
- `flow install --profile <p>` - Install by profile
- `flow upgrade self` - Update flow-cli
- `flow upgrade tools` - Update brew packages
- `flow doctor` - Health check & diagnostics

### Status Management
- `status [project]` - Show/update status
- `setprogress <n>` - Quick progress update

### Timers
- `timer [min]` - Focus timer
- `timer break` - Break timer
- `pom [cycles]` - Pomodoro

### Daily Routine
- `morning` - Start of day overview
- `today` - Today's status
- `week` - Weekly review
- `am` - Quick morning check

## Integration
- Atlas: Optional state engine (`npm i -g @data-wise/atlas`)
- Graceful degradation when atlas not installed
- All commands work standalone

## Installation
```bash
# As ZSH plugin (antidote)
antidote install data-wise/flow-cli

# Manual
source /path/to/flow.plugin.zsh
```

## Configuration
```zsh
# In .zshrc before sourcing plugin:
FLOW_PROJECTS_ROOT=~/projects
FLOW_ATLAS_ENABLED=auto    # auto|yes|no
FLOW_LOAD_DISPATCHERS=yes  # Load v, g, mcp, obs
FLOW_QUIET=1               # Disable welcome message
```

## Links
- GitHub: https://github.com/Data-Wise/flow-cli
- Atlas: https://github.com/Data-Wise/atlas
- npm (atlas): `npm install -g @data-wise/atlas`

## Roadmap

### v3.3.0 - Configuration & Plugin System âœ… COMPLETE
- [x] `flow config` - Interactive configuration
  - [x] `flow config show` - Display current config
  - [x] `flow config set <key> <value>` - Set config value
  - [x] `flow config edit` - Open config in editor
  - [x] `flow config reset` - Reset to defaults
  - [x] `flow config wizard` - Interactive configuration wizard
  - [x] `flow config export` - Export config in shell format
  - [x] `flow config path` - Show config file paths
- [x] Plugin system
  - [x] Plugin loader architecture (lib/plugin-loader.zsh, 400+ lines)
  - [x] Plugin discovery (local + git)
  - [x] `flow plugin list` - List available plugins
  - [x] `flow plugin install <name>` - Install plugin
  - [x] `flow plugin enable/disable` - Toggle plugins
  - [x] `flow plugin create` - Create new plugin from template
  - [x] Hook system with 8 events
- [x] Configuration profiles
  - [x] `flow config profile save <name>` - Save current config
  - [x] `flow config profile load <name>` - Load config profile
  - [x] Built-in profiles: minimal, developer, adhd, researcher
  - [x] Export/import for sharing

### v3.4.0 - AI Enhancement
- [ ] AI recipes/templates
  - [ ] Pre-built prompts for common tasks
  - [ ] `flow ai recipe <name>` - Run saved recipe
  - [ ] Custom recipe creation
- [ ] Learning from usage
  - [ ] Track successful commands
  - [ ] Personalized suggestions
- [ ] Multi-model support
  - [ ] Switch between Claude models
  - [ ] Optional OpenAI/Gemini integration
- [ ] Conversation mode
  - [ ] `flow ai chat` - Interactive session
  - [ ] Context persistence

### v3.5.0 - Dashboard Enhancements
- [ ] Dopamine features
  - [ ] Quick wins section (< 30min tasks)
  - [ ] Recent wins display
  - [ ] Urgency indicators (ðŸ”¥â°âš¡)
- [ ] Polish
  - [ ] Enhanced streak visualization
  - [ ] Daily goal tracking
  - [ ] Extended .STATUS format
- [ ] Interactive TUI improvements
  - [ ] Keyboard shortcuts
  - [ ] Live refresh

### v4.0.0 - Ecosystem Integration
- [ ] Cross-tool orchestration
  - [ ] `flow sync all` - Sync everything
  - [ ] Unified status across tools
- [ ] Remote state sync
  - [ ] Optional cloud backup
  - [ ] Multi-device support
- [ ] Team features (optional)
  - [ ] Shared project templates
  - [ ] Team dashboards

## Session Log
- 2025-12-26: CONFIG - Created config system (lib/config.zsh, 350+ lines)
- 2025-12-26: CONFIG - Created flow config command with 11 subcommands
- 2025-12-26: CONFIG - Built-in profiles: minimal, developer, adhd, researcher
- 2025-12-26: CONFIG - Interactive wizard and profile management
- 2025-12-26: PLUGIN - Created plugin system (lib/plugin-loader.zsh, 400+ lines)
- 2025-12-26: PLUGIN - Created flow plugin command with 9 subcommands
- 2025-12-26: PLUGIN - Created hook system with 8 events
- 2025-12-26: PLUGIN - Created example plugin demonstrating capabilities
- 2025-12-26: PLUGIN - Version bump to 3.3.0
- 2025-12-26: AI - Created `flow ai` command (461 lines) - ask AI with context
- 2025-12-26: AI - Created `flow do` command - natural language â†’ shell
- 2025-12-26: AI - Enhanced `stuck --ai` and `next --ai` with Claude integration
- 2025-12-26: INSTALL - Created `flow install` command (445 lines) - profiles & categories
- 2025-12-26: UPGRADE - Created `flow upgrade` command (377 lines) - self, tools, plugins
- 2025-12-26: Version bump to 3.2.0 - 1594 new lines of code
- 2025-12-26: DOCTOR - Created `flow doctor` command with --fix and --ai modes
- 2025-12-26: DOCTOR - Created setup/Brewfile with 14 recommended CLI tools
- 2025-12-26: DOCTOR - Fixed 10+ broken documentation links
- 2025-12-26: DOCTOR - Updated COMMAND-QUICK-REFERENCE.md and installation.md
- 2025-12-26: DOCTOR - Deployed updated website to GitHub Pages
- 2025-12-25: Phase 1 COMPLETE - All 5 improvements implemented and tested
- 2025-12-25: Dashboard UX review - designed ADHD-friendly improvements
- 2025-12-25: Fixed external command deps (sed/cut/wc/tr/date â†’ ZSH builtins)
- 2025-12-25: v3.0.0 - Clean Architecture achieved
- 2025-12-25: Legacy 140KB functions archived
- 2025-12-25: Symlink-only external integrations
